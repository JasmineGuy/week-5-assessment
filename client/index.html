<!DOCTYPE html>
<html>
  <head>
    <title>Back End Assessment</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body class="container">
    
    <div class='button-container'>
      <button class="buttons" id="complimentButton">Get a compliment</button>
      <button class="buttons" id="fortuneButton">Get a fortune</button>
      <button class="buttons" id="jokeButton">Get a joke</button>
    </div>

    <div>
      <form id='role-model-form'>
        <input type='text' id='first-name' placeholder="Enter first name of role model"/>
        <input type='text' id='last-name' placeholder="Enter last name of role model"/>
        <input type='text' id='reason' placeholder="Enter reason for distinction"/>
        <input type='text' id='rm-image' placeholder="Paste image URL"/>
        <button>Submit</button>
      </form>
  </div>
    <div>
      <h2>My Role Models</h2>
      <section id="role-model-container"></section>
  </div>


    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      let btnContainer = document.querySelector('.button-container')
      const roleModelDisplay = document.querySelector('#role-model-container')
      const form =document.querySelector('#role-model-form')

      const getAllRoleModels = () => {
      console.log('GET ALL')
      axios.get('http://localhost:4000/api/rolemodels')
      .then((response) => {
          console.log(response.data)

          const modelCard = document.createElement('div')

          let roleModels = response.data
          for (let i = 0; i <=roleModels.length; i++){
            console.log(roleModels[i].firstName)
            roleModelDisplay.append(roleModels[i].firstName)
          }
      })}

      document.getElementById("complimentButton").onclick = function () {
        axios.get("http://localhost:4000/api/compliment/")
            .then(function (response) {
              const compliment = response.data;
              btnContainer.append(compliment)
            });
      };
      document.getElementById("fortuneButton").onclick = function () {
        axios.get('http://localhost:4000/api/fortune')
        .then(function (response) {
          const fortune = response.data;
          btnContainer.append(fortune)
        })
      }
      document.getElementById("jokeButton").onclick = function () {
        axios.get('https://api.chucknorris.io/jokes/random')
        .then(function (response) {
          console.log(response.data.value)
          const joke = response.data.value;
          btnContainer.append(joke)
        })
      }

      function submitHandler(e) {
      e.preventDefault()

      let firstName = document.querySelector('#first-name')
      let lastName = document.querySelector('#last-name')
      let reason = document.querySelector('#reason')
      let imageURL = document.querySelector('#rm-img')

      let newObj = {
          firstName: firstName.value,
          lastName: lastName.value, 
          reason: reason.value,
          imageURL: imageURL.value
      }
      createModel(newObj)

        firstName.value = ''
        lastName.value = ''
        reason.value = ''
        imageURL.value = ''
    }

//     function createModelCard(model) {
//     const modelCard = document.createElement('div')
//     modelCard.classList.add('model-card')

//     modelCard.innerHTML = `<img alt='model cover image' src=${model.imageURL} class="house-cover-image"/>
//     <p class="address">${model.address}</p>
//     <div class="btns-container">
//         <button onclick="updateHouse(${model.id}, 'minus')">-</button>
//         <p class="house-price">$${model.price}</p>
//         <button onclick="updateHouse(${model.id}, 'plus')">+</button>
//     </div>
//     <button onclick="deleteHouse(${model.id})">delete</button>
//     `


//     roleModelDisplay.appendChild(modelCard)
// }

// function displayModels(arr) {
//   roleModelDisplay.innerHTML = ``
//     for (let i = 0; i < arr.length; i++) {
//         createModel(arr[i])
//     }
// }

form.addEventListener('submit', submitHandler)

getAllRoleModels()
    
    </script>
  </body>
</html>